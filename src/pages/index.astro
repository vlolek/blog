---
import AuthorCard from '@/components/AuthorCard.astro'
import BlogCard from '@/components/BlogCard.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import ProjectCard from '@/components/ProjectCard.astro'
import { buttonVariants } from '@/components/ui/button'
import { SITE } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import {
  getAllEducation,
  getAllProjects,
  getAuthorById,
  getRecentPosts,
} from '@/lib/collections'

const blog = await getRecentPosts(
  SITE.featuredPostCount,
)
const author = await getAuthorById(
  'vladlenoleksiuk',
)
// Prendi i primi 3 progetti piÃ¹ recenti (giÃ  ordinati per startDate da getAllProjects)
const projects = (await getAllProjects()).slice(
  0,
  3,
)
// Prendi i primi 3 articoli di formazione piÃ¹ recenti
const education = (await getAllEducation()).slice(
  0,
  3,
)
---

<Layout class="relative max-w-3xl space-y-6">
  <PageHead includeOrganization={true} />

  <!-- ÐÐ½Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ„Ð¾Ð½ Ñ Ñ‡Ð°ÑÑ‚Ð¸Ñ†Ð°Ð¼Ð¸ -->
  <div class="animated-bg"></div>

  <section class="animate-fade-in relative z-10">
    <!-- ÐÐ½Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚ Ð·Ð° Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð¼ -->
    <div class="gradient-blob"></div>
    <h1
      class="relative mb-4 text-3xl font-medium"
    >
      <span class="animate-text-gradient"
        >{SITE.title}</span
      >
    </h1>
    {author && <AuthorCard author={author} />}
  </section>

  {
    blog.length > 0 && (
      <section
        class="animate-slide-up relative z-10 flex flex-col gap-y-4"
        style="animation-delay: 0.1s;"
        aria-labelledby="ultimi-post-heading"
      >
        <div class="flex items-center justify-between border-b pb-2">
          <h2
            id="ultimi-post-heading"
            class="text-xl font-medium tracking-wider uppercase"
          >
            Ultimi post
          </h2>
          <Link
            href="/blog"
            class={
              buttonVariants({
                variant: 'ghost',
                size: 'sm',
              }) + ' group'
            }
            title="Vedi tutti i post del blog"
          >
            Tutti
            <span
              class="ml-1.5 transition-transform group-hover:translate-x-1"
              aria-hidden="true"
            >
              &rarr;
            </span>
          </Link>
        </div>
        <ul
          class="flex flex-col divide-y"
          aria-label="Lista degli ultimi post del blog"
        >
          {blog.map((post, index) => (
            <li
              class="animate-fade-in hover-card-effect"
              style={`animation-delay: ${0.2 + index * 0.1}s;`}
            >
              <BlogCard entry={post} />
            </li>
          ))}
        </ul>
      </section>
    )
  }

  {
    education.length > 0 && (
      <section
        class="animate-slide-up relative z-10 flex flex-col gap-y-4"
        style="animation-delay: 0.5s;"
        aria-labelledby="ultimi-articoli-formazione-heading"
      >
        <div class="flex items-center justify-between border-b pb-2">
          <h2
            id="ultimi-articoli-formazione-heading"
            class="text-xl font-medium tracking-wider uppercase"
          >
            Formazione
          </h2>
          <Link
            href="/education"
            class={
              buttonVariants({
                variant: 'ghost',
                size: 'sm',
              }) + ' group'
            }
            title="Vedi tutti gli articoli di formazione"
          >
            Tutto
            <span
              class="ml-1.5 transition-transform group-hover:translate-x-1"
              aria-hidden="true"
            >
              &rarr;
            </span>
          </Link>
        </div>
        <ul
          class="flex flex-col divide-y"
          aria-label="Lista degli ultimi articoli di formazione"
        >
          {education.map((article, index) => (
            <li
              class="animate-fade-in hover-card-effect"
              style={`animation-delay: ${0.6 + index * 0.1}s;`}
            >
              <BlogCard entry={article} />
            </li>
          ))}
        </ul>
      </section>
    )
  }

  {
    projects.length > 0 && (
      <section
        class="animate-slide-up relative z-10 flex flex-col gap-y-4"
        style="animation-delay: 0.9s;"
        aria-labelledby="ultimi-progetti-heading"
      >
        <div class="flex items-center justify-between border-b pb-2">
          <h2
            id="ultimi-progetti-heading"
            class="text-xl font-medium tracking-wider uppercase"
          >
            Progetti
          </h2>
          <Link
            href="/projects"
            class={
              buttonVariants({
                variant: 'ghost',
                size: 'sm',
              }) + ' group'
            }
            title="Vedi tutti i progetti"
          >
            Tutti
            <span
              class="ml-1.5 transition-transform group-hover:translate-x-1"
              aria-hidden="true"
            >
              &rarr;
            </span>
          </Link>
        </div>
        <ul
          class="flex flex-col divide-y"
          aria-label="Lista degli ultimi progetti"
        >
          {projects.map((project, index) => (
            <li
              class="animate-fade-in hover-card-effect"
              style={`animation-delay: ${1.0 + index * 0.1}s;`}
            >
              <ProjectCard project={project} />
            </li>
          ))}
        </ul>
      </section>
    )
  }
</Layout>
#Simboly
<div class="floating-symbols" aria-hidden="true">
  <span class="symbol symbol-1">âœ¨</span>
  <span class="symbol symbol-2">ðŸš€</span>
  <span class="symbol symbol-3">ðŸ’¡</span>
  <span class="symbol symbol-4">âš¡</span>
  <span class="symbol symbol-5">ðŸŽ¯</span>
  <span class="symbol symbol-6">ðŸ’»</span>
  <span class="symbol symbol-7">ðŸ“š</span>
  <span class="symbol symbol-8">ðŸŽ¨</span>
</div>
